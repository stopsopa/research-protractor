dist: trusty
language: php
php:
  - 7

addons:
  sauce_connect:
    username:
      secure: "XOkgPTA2f6KxInMO9XgMqxyOdhgeOqJXSVbykn6xhcDATUeV1PdfeJYL3u/bfRUOPU5y7y4gqCrSRi8JYcW7vqozLTSHdhJsjbaibZGy50zGpUyyuGFs068XMVryOkkKqL0e2sju5RbHrnb32fVbftt82XfqkBoUuxyZRTnbSJ7w/PSoYmcG2b1fV7Xc5d/pkyTChIdn9NEOrcpbHZZRRxcTJk+506VTc5cD4jDrcRplby8oC+Aybm0HoOvhsgbGitfak9xbvpz+pIeazOpqmNxE96eBIqWvR91K5y36FTLH24xYF0vi/9NaSbiJ341OYEFyXbL6iUyTY3J0GVKOor7PfRxqK52EYoi6k0LsXwTDZ9JyBktx9dqk3ALJosd/dQdGh4v1Adq9apSPs92qLvBfLKdSOdfebYczpWlTAfPLg3EXFfwTIJ2RLBXGeWyRqk0EYV2zK/7F4XoKP4lka7+KOGEs/LtbmgYf/WqFkpUnbtvI1vzK9hhtszjydeTHb8zggvScuQhCP4zdXhm/W3yIFmHzJmfv/VtQgBdnjEjRscZ3F4PiAsBRcCt+5uwRKbwSR+I3JE4AHveTDzV5+jxGlKIP+TsLOahWpUAo12OjcqG1spHP3toSflrBrdE1vyTRWuwYVZ61Os5v4E0amreocAjcOqpRLWJ/1OFaahI="
    access_key:
      secure: "GjKWWVrwD/Ah1wyzBE0uGea2iTO4fWNQVe6g7hi0ARZp31t+6iCmePV3x/rHK/bDeQvBeP1MGXkCCb17nYqVl/TGHJKMc7e8LEb0DzXsl7BEqmlK/bg21N2n+BoGI1h5kFwR0sP4MGTMGMYyyIeLwgmGw67x0XcxY3BFaQzORAuAqzJlbvmFr9ZsTCAeNqQ0s1fE/kCSwbZYemM4ny42QWNHpC/LYg900iWetqztgk3rKWxVfURVgntCbbQNcSAvxUjp8Uv/XTchGEWSY3m62OGguPafVG4TbVTX39qkIuXuqiqvLg4xujuFqVLnlYeGmvIm1DkNjjpQ5JMwrviIn3Uv3h3h/ZmB9q5DfgdkA36imixjISfeYwng0lfC/XTEPtUgFVRuEj7zUnvRy5AOjHYaLsUCEl0Gj0OP8MvGKHCASMWou1YRvamFgNpZvabVQ/arigG5jr2ohjb8wQ0m5ZCQhDCIK8z+DAJtYFh4MuZTn9VKdw2JyMnia0PtcxBQpXUjjdiyVDCZtE4/0D9tKFL27ndEeilQFUGn5Umg97R6X2WHypB3ZDrtrXucPeybrwwc5e94ftL64f97mTe5ZVDtCVM5zqK3b3DDadt2d53LUh91XBALTi09syXTQmXQIxDufSgp/MK0L+J01W5nZ7mSEr2gh45yf4RcHI6aBfA="

before_script:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start

#services:
#  - mysql
env:
  matrix:
  - TRAVIS_NODE_VERSION="6"
  global:
    secure: btG11rCGxh+SsBnYmzWO2mXWYm+Gpz8UMocXychvPKXdwrLCTK4RWlh25/5NpoIUOqWYmUuF/tCLJCXv7TCUOfJKthRVqCACn5qr/1TFmOab/wX3mUS2hp2vh0Y8qKpF4l/Zy8eU1YWPKRSX1SGck27lzSOJjw80GohSyi/dOMG1ZSVItGBhIWbmr2XzUKIJuq/mp0ofvWKedc8bOKUlaZo6O9qBGuG572Sysfv9xNLAljUbeO1VyTwiEi0TVtkQLBTB0jXuD6Ats4Ja8HBaRvHq5IcUDpBHILEfgRrx8Ni3sqTM0jQ+StPbHVCXI6IjTzC7r1ysbZsgzDx+3vgbtinIxapZ9QDoirNCyBc9vYj8OhXObTNCOYWbnzmUe0p3SH7olxvud3Jxjbz+oc9V+wzKe9NNxeqLPJhpK9UkW/u+Cvoj5fEhZyR2rw9ffd1mTCS6ztDTRPxaKuStuY8OOwIdvwkfVJ4Y+aVaDzNVNuV693aXEGCiJmGrXwp1CSJ+6Fvn1xmlXB1LGpFvZ6k+YbRRZRffUqNZzVj8mgm46DGPylBA3YYB+JXjtA+c6qQUExfVnZgr06nq96gaxvsBGDj6xGNU/ejnOGxQMh7/6h0/+cKfOvbZj16vyK/8aAiD4srN1g85CgbDQcXmh7Bt1qQGJJhQNtTk6Tgg3dknE2o=

install:
  - rm -rf ~/.nvm && git clone https://github.com/creationix/nvm.git ~/.nvm && (cd ~/.nvm && git checkout `git describe --abbrev=0 --tags`) && source ~/.nvm/nvm.sh && nvm install $TRAVIS_NODE_VERSION
  - npm install

sudo: true # with ports higher then 1024 no need to use sudo

#install:
#  - npm install -g yarn # no need to install yarn https://docs.travis-ci.com/user/languages/javascript-with-nodejs/#Travis-CI-supports-yarn
#  - yarn # no need to even execute yarn if there is yarn.lock file

before_script: # https://docs.travis-ci.com/user/gui-and-headless-browsers/#Using-xvfb-to-Run-Tests-That-Require-a-GUI
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - "echo $SENV;"
  - php -S localhost:1025 & disown
  - sleep 5
  - curl localhost:1025/fixtures/event.php -I
  - "cd protractor"
  - php -v
  - node -v
  - yarn

script:
  - node node_modules/protractor/bin/protractor conf.js
